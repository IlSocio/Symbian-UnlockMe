
PATH=C:\Symbian\7.0s\Series60_v20\epoc32\tools\;C:\Symbian\7.0s\Series60_v20\epoc32\gcc\bin\;C:\Symbian\6.1\Shared\epoc32\gcc\bin;C:\Symbian\6.1\Shared\epoc32\tools;C:\Programmi\File comuni\Symbian\Tools;C:\Programmi\CSL Arm Toolchain\bin;H:\Perl\bin\;C:\WINXP\system32;C:\WINXP;C:\WINXP\System32\Wbem;C:\Programmi\ATI Technologies\ATI.ACE\;C:\Programmi\Microsoft SQL Server\90\Tools\binn\;C:\Programmi\QuickTime\QTSystem\;C:\Programmi\Microsoft Visual Studio\Common\Tools\WinNT;C:\Programmi\Microsoft Visual Studio\Common\MSDev98\Bin;C:\Programmi\Microsoft Visual Studio\Common\Tools;C:\Programmi\Microsoft Visual Studio\VC98\bin;c:\svn\bin\

# EPOC DEFINITIONS

EPOCBLD = \Symbian\7.0s\Series60_v20\EPOC32\BUILD\ONLINE\UNLOCKME\GROUP\S60\UNLOCKME\WINS\ #
EPOCTRG = \Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\ #
EPOCLIB = \Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\ #
EPOCLINK = \Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\ #
EPOCSTATLINK = \Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\ #

EPOCBLDUDEB = $(EPOCBLD)UDEB
EPOCTRGUDEB = $(EPOCTRG)UDEB
EPOCLIBUDEB = $(EPOCLIB)UDEB
EPOCLINKUDEB = $(EPOCLINK)UDEB
EPOCSTATLINKUDEB = $(EPOCSTATLINK)UDEB

EPOCBLDUREL = $(EPOCBLD)UREL
EPOCTRGUREL = $(EPOCTRG)UREL
EPOCLIBUREL = $(EPOCLIB)UDEB
EPOCLINKUREL = $(EPOCLINK)UDEB
EPOCSTATLINKUREL = $(EPOCSTATLINK)UREL


TRGDIR = Z\SYSTEM\APPS\UNLOCKME

DATADIR = Z\SYSTEM\DATA

LIBRARY :

MAKEWORKLIBRARY : "\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB"

"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB" :
	@perl -S emkdir.pl "\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB"


# BUILD - UDEB

LIBS= \
	"$(EPOCLINKUDEB)\FLOGGER.LIB" \
	"$(EPOCLINKUDEB)\MEDIACLIENTAUDIO.LIB" \
	"$(EPOCLINKUDEB)\CNTMODEL.LIB" \
	"$(EPOCLINKUDEB)\EUSER.LIB" \
	"$(EPOCLINKUDEB)\APPARC.LIB" \
	"$(EPOCLINKUDEB)\CONE.LIB" \
	"$(EPOCLINKUDEB)\EIKCORE.LIB" \
	"$(EPOCLINKUDEB)\EIKCOCTL.LIB" \
	"$(EPOCLINKUDEB)\AVKON.LIB" \
	"$(EPOCLINKUDEB)\EIKDLG.LIB" \
	"$(EPOCLINKUDEB)\EIKCTL.LIB" \
	"$(EPOCLINKUDEB)\MSGS.LIB" \
	"$(EPOCLINKUDEB)\SMCM.LIB" \
	"$(EPOCLINKUDEB)\GSMU.LIB" \
	"$(EPOCLINKUDEB)\MTUR.LIB" \
	"$(EPOCLINKUDEB)\COMMONENGINE.LIB" \
	"$(EPOCLINKUDEB)\FBSCLI.LIB" \
	"$(EPOCLINKUDEB)\PBKVIEW.LIB" \
	"$(EPOCLINKUDEB)\PBKENG.LIB" \
	"$(EPOCLINKUDEB)\ETEXT.LIB" \
	"$(EPOCLINKUDEB)\ETEL.LIB" \
	"$(EPOCLINKUDEB)\EFSRV.LIB" \
	"$(EPOCLINKUDEB)\ETELMM.LIB" \
	"$(EPOCLINKUDEB)\COMMDB.LIB" \
	"$(EPOCLINKUDEB)\ESTOR.LIB" \
	"$(EPOCLINKUDEB)\BAFL.LIB" \
	"$(EPOCLINKUDEB)\EGUL.LIB"

LINK_OBJS= \
	"$(EPOCBLDUDEB)\ABOUTCONTAINER.obj" \
	"$(EPOCBLDUDEB)\ABOUTVIEW.obj" \
	"$(EPOCBLDUDEB)\BASE64.obj" \
	"$(EPOCBLDUDEB)\CREDITSCONTAINER.obj" \
	"$(EPOCBLDUDEB)\CREDITSVIEW.obj" \
	"$(EPOCBLDUDEB)\PHONE.obj" \
	"$(EPOCBLDUDEB)\SPLASHCONTAINER.obj" \
	"$(EPOCBLDUDEB)\SPLASHVIEW.obj" \
	"$(EPOCBLDUDEB)\STORAGE.obj" \
	"$(EPOCBLDUDEB)\TIMEOUTTIMER.obj" \
	"$(EPOCBLDUDEB)\UNLOCKME.obj" \
	"$(EPOCBLDUDEB)\UNLOCKME.UID.obj" \
	"$(EPOCBLDUDEB)\UNLOCKMEAPPLICATION.obj" \
	"$(EPOCBLDUDEB)\UNLOCKMEAPPUI.obj" \
	"$(EPOCBLDUDEB)\UNLOCKMEDOCUMENT.obj"

STAGE1_LINK_FLAGS="$(EPOCSTATLINKUDEB)\EDLL.LIB" \
 $(LIBS) /nologo /entry:"_E32Dll" /subsystem:windows /dll /debug \
 /incremental:no /machine:IX86 /nodefaultlib /include:"?_E32Dll@@YGHPAXI0@Z" /out:"$(EPOCBLDUDEB)\UNLOCKME.APP" /WARN:3

PRELINKUDEB : $(LINK_OBJS) "$(EPOCSTATLINKUDEB)\EDLL.LIB" $(LIBS)
	link.exe @<<
		$(STAGE1_LINK_FLAGS) $(LINK_OBJS)
<<
	del "$(EPOCBLDUDEB)\UNLOCKME.APP"
	del "$(EPOCBLDUDEB)\UNLOCKME.exp"
	dumpbin /exports /out:"$(EPOCBLDUDEB)\UNLOCKME.inf" "$(EPOCBLDUDEB)\UNLOCKME.lib"
	del "$(EPOCBLDUDEB)\UNLOCKME.lib"
	perl -S makedef.pl -Inffile "$(EPOCBLDUDEB)\UNLOCKME.inf" -1 ?NewApplication@@YAPAVCApaApplication@@XZ "$(EPOCBLD)UNLOCKME.def" 
	del "$(EPOCBLDUDEB)\UNLOCKME.inf"
	lib.exe  /nologo /machine:i386 /nodefaultlib /name:"UNLOCKME.APP" /def:"$(EPOCBLD)UNLOCKME.def" /out:"$(EPOCBLDUDEB)\UNLOCKME.lib"
	del "$(EPOCBLDUDEB)\UNLOCKME.lib"
	@echo First-stage link successful


STOPLINKUDEB : DELEXPOBJUDEB
	@echo Stopped the build by removing the export object,
	@echo if present, because the pre-link stage failed


POSTBUILDUDEB : DELEXPOBJUDEB


DELEXPOBJUDEB :
	if exist "$(EPOCBLDUDEB)\UNLOCKME.exp" del "$(EPOCBLDUDEB)\UNLOCKME.exp"



# BUILD - UREL

LIBS= \
	"$(EPOCLINKUREL)\FLOGGER.LIB" \
	"$(EPOCLINKUREL)\MEDIACLIENTAUDIO.LIB" \
	"$(EPOCLINKUREL)\CNTMODEL.LIB" \
	"$(EPOCLINKUREL)\EUSER.LIB" \
	"$(EPOCLINKUREL)\APPARC.LIB" \
	"$(EPOCLINKUREL)\CONE.LIB" \
	"$(EPOCLINKUREL)\EIKCORE.LIB" \
	"$(EPOCLINKUREL)\EIKCOCTL.LIB" \
	"$(EPOCLINKUREL)\AVKON.LIB" \
	"$(EPOCLINKUREL)\EIKDLG.LIB" \
	"$(EPOCLINKUREL)\EIKCTL.LIB" \
	"$(EPOCLINKUREL)\MSGS.LIB" \
	"$(EPOCLINKUREL)\SMCM.LIB" \
	"$(EPOCLINKUREL)\GSMU.LIB" \
	"$(EPOCLINKUREL)\MTUR.LIB" \
	"$(EPOCLINKUREL)\COMMONENGINE.LIB" \
	"$(EPOCLINKUREL)\FBSCLI.LIB" \
	"$(EPOCLINKUREL)\PBKVIEW.LIB" \
	"$(EPOCLINKUREL)\PBKENG.LIB" \
	"$(EPOCLINKUREL)\ETEXT.LIB" \
	"$(EPOCLINKUREL)\ETEL.LIB" \
	"$(EPOCLINKUREL)\EFSRV.LIB" \
	"$(EPOCLINKUREL)\ETELMM.LIB" \
	"$(EPOCLINKUREL)\COMMDB.LIB" \
	"$(EPOCLINKUREL)\ESTOR.LIB" \
	"$(EPOCLINKUREL)\BAFL.LIB" \
	"$(EPOCLINKUREL)\EGUL.LIB"

LINK_OBJS= \
	"$(EPOCBLDUREL)\ABOUTCONTAINER.obj" \
	"$(EPOCBLDUREL)\ABOUTVIEW.obj" \
	"$(EPOCBLDUREL)\BASE64.obj" \
	"$(EPOCBLDUREL)\CREDITSCONTAINER.obj" \
	"$(EPOCBLDUREL)\CREDITSVIEW.obj" \
	"$(EPOCBLDUREL)\PHONE.obj" \
	"$(EPOCBLDUREL)\SPLASHCONTAINER.obj" \
	"$(EPOCBLDUREL)\SPLASHVIEW.obj" \
	"$(EPOCBLDUREL)\STORAGE.obj" \
	"$(EPOCBLDUREL)\TIMEOUTTIMER.obj" \
	"$(EPOCBLDUREL)\UNLOCKME.obj" \
	"$(EPOCBLDUREL)\UNLOCKME.UID.obj" \
	"$(EPOCBLDUREL)\UNLOCKMEAPPLICATION.obj" \
	"$(EPOCBLDUREL)\UNLOCKMEAPPUI.obj" \
	"$(EPOCBLDUREL)\UNLOCKMEDOCUMENT.obj"

STAGE1_LINK_FLAGS="$(EPOCSTATLINKUREL)\EDLL.LIB" \
 $(LIBS) /nologo /entry:"_E32Dll" /subsystem:windows /dll \
 /incremental:no /machine:IX86 /nodefaultlib /include:"?_E32Dll@@YGHPAXI0@Z" /out:"$(EPOCBLDUREL)\UNLOCKME.APP" /WARN:3

PRELINKUREL : $(LINK_OBJS) "$(EPOCSTATLINKUREL)\EDLL.LIB" $(LIBS)
	link.exe @<<
		$(STAGE1_LINK_FLAGS) $(LINK_OBJS)
<<
	del "$(EPOCBLDUREL)\UNLOCKME.APP"
	del "$(EPOCBLDUREL)\UNLOCKME.exp"
	dumpbin /exports /out:"$(EPOCBLDUREL)\UNLOCKME.inf" "$(EPOCBLDUREL)\UNLOCKME.lib"
	del "$(EPOCBLDUREL)\UNLOCKME.lib"
	perl -S makedef.pl -Inffile "$(EPOCBLDUREL)\UNLOCKME.inf" -1 ?NewApplication@@YAPAVCApaApplication@@XZ "$(EPOCBLD)UNLOCKME.def" 
	del "$(EPOCBLDUREL)\UNLOCKME.inf"
	lib.exe  /nologo /machine:i386 /nodefaultlib /name:"UNLOCKME.APP" /def:"$(EPOCBLD)UNLOCKME.def" /out:"$(EPOCBLDUREL)\UNLOCKME.lib"
	del "$(EPOCBLDUREL)\UNLOCKME.lib"
	@echo First-stage link successful


STOPLINKUREL : DELEXPOBJUREL
	@echo Stopped the build by removing the export object,
	@echo if present, because the pre-link stage failed


POSTBUILDUREL : DELEXPOBJUREL


DELEXPOBJUREL :
	if exist "$(EPOCBLDUREL)\UNLOCKME.exp" del "$(EPOCBLDUREL)\UNLOCKME.exp"



DEPEND= \
	"\ONLINE\UNLOCKME\DATA\UNLOCKME.L01" \
	"\ONLINE\UNLOCKME\DATA\UNLOCKME.LOC" \
	"\ONLINE\UNLOCKME\INC\S60\UNLOCKME.HRH"

"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME.r" : "\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME.r01"

"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME.r01" : "\ONLINE\UNLOCKME\DATA\S60\Unlockme.rss" $(DEPEND)
	perl -S epocrc.pl -I "\ONLINE\UNLOCKME\DATA\S60" -I "\ONLINE\UNLOCKME\DATA" -I "\ONLINE\UNLOCKME\INC" -I "\ONLINE\UNLOCKME\INC\S60" -I- -I "\Symbian\7.0s\Series60_v20\EPOC32\INCLUDE" -DLANGUAGE_01 -u "\ONLINE\UNLOCKME\DATA\S60\Unlockme.rss" -o"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME.r01" -h"\ONLINE\UNLOCKME\DATA\S60\UNLOCKME.rs~" -t"$(EPOCBLDUDEB)"
	perl -S ecopyfile.pl "\ONLINE\UNLOCKME\DATA\S60\UNLOCKME.rs~" "\Symbian\7.0s\Series60_v20\EPOC32\INCLUDE\UNLOCKME.RSG"
	del "\ONLINE\UNLOCKME\DATA\S60\UNLOCKME.rs~"

"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME.r" : "\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME.r01"

"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME.r01" : "\ONLINE\UNLOCKME\DATA\S60\Unlockme.rss" $(DEPEND)
	perl -S epocrc.pl -I "\ONLINE\UNLOCKME\DATA\S60" -I "\ONLINE\UNLOCKME\DATA" -I "\ONLINE\UNLOCKME\INC" -I "\ONLINE\UNLOCKME\INC\S60" -I- -I "\Symbian\7.0s\Series60_v20\EPOC32\INCLUDE" -DLANGUAGE_01 -u "\ONLINE\UNLOCKME\DATA\S60\Unlockme.rss" -o"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME.r01" -h"\ONLINE\UNLOCKME\DATA\S60\UNLOCKME.rs~" -t"$(EPOCBLDUREL)"
	perl -S ecopyfile.pl "\ONLINE\UNLOCKME\DATA\S60\UNLOCKME.rs~" "\Symbian\7.0s\Series60_v20\EPOC32\INCLUDE\UNLOCKME.RSG"
	del "\ONLINE\UNLOCKME\DATA\S60\UNLOCKME.rs~"

DEPEND= \
	"\ONLINE\UNLOCKME\DATA\UNLOCKME.L01" \
	"\ONLINE\UNLOCKME\DATA\UNLOCKME.LOC"

"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME_CAPTION.r" : "\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME_CAPTION.r01"

"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME_CAPTION.r01" : "\ONLINE\UNLOCKME\DATA\S60\Unlockme_caption.rss" $(DEPEND)
	perl -S epocrc.pl -I "\ONLINE\UNLOCKME\DATA\S60" -I "\ONLINE\UNLOCKME\DATA" -I "\ONLINE\UNLOCKME\INC" -I "\ONLINE\UNLOCKME\INC\S60" -I- -I "\Symbian\7.0s\Series60_v20\EPOC32\INCLUDE" -DLANGUAGE_01 -u "\ONLINE\UNLOCKME\DATA\S60\Unlockme_caption.rss" -o"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME_CAPTION.r01" -h"\ONLINE\UNLOCKME\DATA\S60\UNLOCKME_CAPTION.rs~" -t"$(EPOCBLDUDEB)"
	perl -S ecopyfile.pl "\ONLINE\UNLOCKME\DATA\S60\UNLOCKME_CAPTION.rs~" "\Symbian\7.0s\Series60_v20\EPOC32\INCLUDE\UNLOCKME_CAPTION.RSG"
	del "\ONLINE\UNLOCKME\DATA\S60\UNLOCKME_CAPTION.rs~"

"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME_CAPTION.r" : "\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME_CAPTION.r01"

"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME_CAPTION.r01" : "\ONLINE\UNLOCKME\DATA\S60\Unlockme_caption.rss" $(DEPEND)
	perl -S epocrc.pl -I "\ONLINE\UNLOCKME\DATA\S60" -I "\ONLINE\UNLOCKME\DATA" -I "\ONLINE\UNLOCKME\INC" -I "\ONLINE\UNLOCKME\INC\S60" -I- -I "\Symbian\7.0s\Series60_v20\EPOC32\INCLUDE" -DLANGUAGE_01 -u "\ONLINE\UNLOCKME\DATA\S60\Unlockme_caption.rss" -o"\Symbian\7.0s\Series60_v20\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\UNLOCKME\UNLOCKME_CAPTION.r01" -h"\ONLINE\UNLOCKME\DATA\S60\UNLOCKME_CAPTION.rs~" -t"$(EPOCBLDUREL)"
	perl -S ecopyfile.pl "\ONLINE\UNLOCKME\DATA\S60\UNLOCKME_CAPTION.rs~" "\Symbian\7.0s\Series60_v20\EPOC32\INCLUDE\UNLOCKME_CAPTION.RSG"
	del "\ONLINE\UNLOCKME\DATA\S60\UNLOCKME_CAPTION.rs~"


RECREATEWORKSPACE :
	cd \ONLINE\UNLOCKME\GROUP\S60
	perl -S makmake.pl -D \ONLINE\UNLOCKME\GROUP\S60\UNLOCKME.MMP VC6

